(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PageAgenda"],{"0595":function(e,t,o){},"3b11":function(e,t,o){"use strict";o("0595")},c6f1:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-toolbar",{staticClass:"px-0",attrs:{flat:""}},[o("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v("Hoje")]),e.calendar?[o("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:function(t){return e.calendar.prev()}}},[o("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),o("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:function(t){return e.calendar.next()}}},[o("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),o("v-toolbar-title",{staticClass:"ml-4",domProps:{textContent:e._s(e.calendar.title)}})]:e._e(),o("v-spacer"),o("InputTipoExibicaoCalendario",{model:{value:e.tipoExibicaoCalendario,callback:function(t){e.tipoExibicaoCalendario=t},expression:"tipoExibicaoCalendario"}})],2),o("v-sheet",{attrs:{height:"600"}},[o("v-calendar",{ref:"calendar",attrs:{locale:"pt-br",color:"primary",type:e.tipoExibicaoCalendario,events:e.events,"event-color":e.getEventColor},on:{"click:event":e.exibirEvento,"click:more":e.viewDay,"click:date":e.viewDay},model:{value:e.calendarTimeFrame,callback:function(t){e.calendarTimeFrame=t},expression:"calendarTimeFrame"}}),o("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.exibirMenuEventoSelecionado,callback:function(t){e.exibirMenuEventoSelecionado=t},expression:"exibirMenuEventoSelecionado"}},[e.selectedEvent?o("CardPedidoTutoria",{attrs:{telefone:e.selectedEvent.telefoneProfessor,professorEmail:e.selectedEvent.emailProfessor,professorNome:e.selectedEvent.nomeProfessor,tutoriaInicio:e.selectedEvent.startString,tutoriaFim:e.selectedEvent.endString,assuntoDaTutoria:e.selectedEvent.assunto,showModalTutoria:e.exibirMenuEventoSelecionado},on:{"update-modal-tutoria":function(t){e.exibirMenuEventoSelecionado=t}}}):e._e()],1)],1)],1)},a=[],r=o("1da1"),i=o("5530"),s=o("d4ec"),c=o("bee2"),l=o("262e"),u=o("2caf"),d=(o("96cf"),o("d3b7"),o("3ca3"),o("ddb0"),o("99af"),o("159b"),o("25f0"),o("ac1f"),o("1276"),o("498a"),o("fb6a"),o("a434"),o("9ab4")),f=o("1b40"),v=o("6fc5"),m=o("cdd0"),b=o("ed54"),p=o("a3a5"),g=o("4a4e"),h=function(){return o.e("chunk-2d0f11d0").then(o.bind(null,"9ef4"))},E=function(){return o.e("chunk-4090663f").then(o.bind(null,"3e5b"))},y=function(e){Object(l["a"])(o,e);var t=Object(u["a"])(o);function o(){var e;return Object(s["a"])(this,o),e=t.apply(this,arguments),e.authModule=Object(v["e"])(m["a"],e.$store),e.tutoriaModule=Object(v["e"])(p["a"],e.$store),e.professorModule=Object(v["e"])(g["a"],e.$store),e.userCopy=Object(i["a"])({},e.authModule.user),e.tutoriasArray=[],e.exibirMenuEventoSelecionado=!1,e.tipoExibicaoCalendario="month",e.calendarTimeFrame="",e.selectedEvent=null,e.selectedElement=null,e.events=[],e.telefone=67991121434,e.colors=["blue","indigo","deep-purple","cyan","green","orange","grey darken-1","red","pink"],e}return Object(c["a"])(o,[{key:"tutor",get:function(){return Object(b["a"])(this.authModule.user)}},{key:"criarTutoria",value:function(e,t,o,n,a,r,i,s,c){var l={id:e,date:t,time:o,fotoProfessor:n,nomeProfessor:a,assuntoProfessor:r,mensagemTutoria:i,emailProfessor:s,celularProfessor:c};return l}},{key:"formatarData",value:function(e){if(!e)return"";var t=e.substring(0,10),o=t.substring(8,10),n=t.substring(5,7),a=t.substring(0,4);return t="".concat(o,"/").concat(n,"/").concat(a),t}},{key:"getTutoria",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.tutoriaModule.getAllTutoriasFromTutor(this.userCopy._id).then((function(e){e.forEach((function(e){"aceita"===e.requestState&&o.professorModule.fetchProfessorById(e.professorId).then((function(n){var a=o.criarTutoria(e._id,o.formatarData(e.tutoringDate.toString()),e.tutoringHour.toString(),"professor.fotoPerfil",n.nome,e.tutoringTopic,e.requestMessage,n.email,n.celular);t.push(a);var r=o.formataStringData(a.date),i=a.time.split("-");console.log("horas",i),i[0]&&i[1]&&o.setEvent("Tutoria prof. ".concat(a.nomeProfessor),r+" "+i[0].trim(),r+" "+i[1].trim(),!1,a.celularProfessor,a.emailProfessor,a.nomeProfessor,a.assuntoProfessor)}))})),console.log("tuto",t,t.length)})).finally((function(){o.tutoriasArray=t,console.log(t),console.log("test"),console.log(o.tutoriasArray.length,o.tutoriasArray),t.forEach((function(e){console.log("test"),console.log(e.date)}))}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"viewDay",value:function(e){var t=e.date;this.calendarTimeFrame=t,this.tipoExibicaoCalendario="day"}},{key:"formataStringData",value:function(e){var t=e.split("/")[0],o=e.split("/")[1],n=e.split("/")[2];return n+"-"+("0"+o).slice(-2)+"-"+("0"+t).slice(-2)}},{key:"getEventColor",value:function(e){return e?e.color:null}},{key:"setToday",value:function(){this.calendarTimeFrame=""}},{key:"exibirEvento",value:function(e){var t=this,o=e.nativeEvent,n=e.event,a=function(){t.selectedEvent=n,t.selectedElement=o.target,setTimeout((function(){t.exibirMenuEventoSelecionado=!0}),10)};this.exibirMenuEventoSelecionado?(this.exibirMenuEventoSelecionado=!1,setTimeout(a,10)):a(),o.stopPropagation()}},{key:"setEvent",value:function(e,t,o,n,a,r,i,s){this.events.push({name:e,color:this.colors[Math.floor(Math.random()*this.colors.length)],timed:!n,start:new Date(t),end:new Date(o),telefoneProfessor:a,emailProfessor:r,nomeProfessor:i,startString:t,endString:o,assunto:s})}},{key:"closeAndCancel",value:function(e){var t=this;setTimeout((function(){t.exibirMenuEventoSelecionado=!1,t.events.splice(e,1)}),2500)}},{key:"updatePageData",value:function(){console.log("updateAgenda"),this.getTutoria()}},{key:"mounted",value:function(){var e=this;this.getTutoria(),this.$root.$on("myEvent",(function(){console.log("chegou no evento"),e.updatePageData()}))}}]),o}(f["d"]);Object(d["a"])([Object(f["c"])("calendar")],y.prototype,"calendar",void 0),y=Object(d["a"])([Object(f["a"])({name:"AgendaProfessor",components:{CardPedidoTutoria:E,InputTipoExibicaoCalendario:h}})],y);var k=y,x=k,T=(o("3b11"),o("2877")),P=Object(T["a"])(x,n,a,!1,null,null,null);t["default"]=P.exports}}]);
//# sourceMappingURL=PageAgenda.791e17ca.js.map