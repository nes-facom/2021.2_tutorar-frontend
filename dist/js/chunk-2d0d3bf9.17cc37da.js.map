{"version":3,"sources":["webpack:///./src/components/dialogs/DialogAlterarSenha.vue?346b","webpack:///./src/api/users/find-by-credentials.ts","webpack:///./src/api/auth/change-password.ts","webpack:///./src/components/dialogs/DialogAlterarSenha.vue","webpack:///./src/components/dialogs/DialogAlterarSenha.vue?1d8c","webpack:///./src/components/dialogs/DialogAlterarSenha.vue?aa70"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","$emit","model","value","callback","$$v","expression","staticClass","_v","currentPassword","newPassword","newPasswordConfirmation","length","buscarPorSenha","staticRenderFns","findUserByCredentialsService","email","password","Promise","resolve","reject","post","then","res","data","catch","err","apiError","changePasswordService","id","passwordConfirmation","patch","response","error","message","statusCode","authModule","$store","user","_id","$toasted","success","theme","position","duration","required","type","Boolean","name","component"],"mappings":"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","file":"js/chunk-2d0d3bf9.17cc37da.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"width\":\"400\"},on:{\"click:outside\":function($event){return _vm.$emit('input', false)}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline d-flex justify-center grey--text text--darken-1\"},[_vm._v(\" Alteração de senha \")]),_c('v-card-text',{staticClass:\"text-center\"},[_vm._v(\" Para continuar, digite sua senha \")]),_c('v-text-field',{staticClass:\"px-8\",attrs:{\"placeholder\":\"Senha Atual\"},model:{value:(_vm.currentPassword),callback:function ($$v) {_vm.currentPassword=$$v},expression:\"currentPassword\"}}),_c('v-text-field',{staticClass:\"px-8\",attrs:{\"placeholder\":\"Nova Senha\"},model:{value:(_vm.newPassword),callback:function ($$v) {_vm.newPassword=$$v},expression:\"newPassword\"}}),_c('v-text-field',{staticClass:\"px-8\",attrs:{\"placeholder\":\"Confirme sua nova senha\"},model:{value:(_vm.newPasswordConfirmation),callback:function ($$v) {_vm.newPasswordConfirmation=$$v},expression:\"newPasswordConfirmation\"}}),_c('v-card-actions',{staticClass:\"pa-4\"},[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":function($event){return _vm.$emit('input', false)}}},[_vm._v(\"Cancelar\")]),_c('v-btn',{attrs:{\"disabled\":_vm.currentPassword.length <= 5 && _vm.newPassword.length <= 5,\"color\":\"primary\"},on:{\"click\":_vm.buscarPorSenha}},[_vm._v(\"Próximo\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import handleAxiosError from \"@/api/axios-error-handler\"\nimport { api } from \"@/api/axios-instance-creator\"\nimport { RawUser } from \"@/store/modules/users-types\"\n\nexport function findUserByCredentialsService(email: string, password: string): Promise<RawUser> {\n  return new Promise((resolve, reject) => {\n    api()\n      .post(\"users/find-by-credentials\", { email, password })\n      .then(res => {\n        resolve(res.data)\n      })\n      .catch(err => {\n        const apiError = handleAxiosError(err)\n        reject(apiError)\n      })\n  })\n}\n","import { api } from \"@/api/axios-instance-creator\"\nimport handleAxiosError from \"@/api/axios-error-handler\"\nimport { AxiosError } from \"axios\"\n\nexport function changePasswordService(id: string, password: string, passwordConfirmation: string) {\n  return new Promise((resolve, reject) => {\n\n  api()\n    .patch(\"users/auth/change-password/\" + `${id}`, { password, passwordConfirmation })\n    .then(response => {\n        resolve(response)\n    })\n    .catch((error: AxiosError) => {\n      let { message } = handleAxiosError(error)\n\n        if (error.response?.data?.statusCode === 400) message = 'Dados inválidos'\n        if (error.response?.data?.statusCode === 401) message = 'Dados inválidos'\n        if (error.response?.data?.statusCode === 404) message = 'Método não encontrado'\n\n        reject(message)\n    })\n  })\n}\n","\nimport { findUserByCredentialsService } from \"@/api/users/find-by-credentials\"\nimport { changePasswordService } from \"@/api/auth/change-password\"\nimport Auth from \"@/store/modules/auth\"\nimport { User } from \"@/store/modules/auth-types\"\nimport { Vue, Component, Prop } from \"vue-property-decorator\"\nimport { getModule } from \"vuex-module-decorators\"\n\n@Component({\n  name: \"DialogAlterarSenha\"\n})\nexport default class DialogAlterarSenha extends Vue {\n  @Prop({ required: true, type: Boolean })\n  value!: boolean\n\n  authModule = getModule(Auth, this.$store)\n\n  currentPassword = \"\"\n  newPassword = \"\"\n  newPasswordConfirmation = \"\"\n\n  get user(): User {\n    return this.authModule.user as User\n  }\n\n  async buscarPorSenha() {\n    findUserByCredentialsService(this.user.email, this.currentPassword).then((response) => {\n      changePasswordService(response._id, this.newPassword, this.newPasswordConfirmation)\n      .then(() => {\n           this.$toasted.success(\"Senha alterada com sucesso\", {\n            theme: \"toasted-primary\",\n            position: \"top-right\",\n            duration: 5000\n          })\n        this.currentPassword = \"\"\n        this.newPassword = \"\"\n        this.newPasswordConfirmation = \"\"\n        this.$emit('update-modal-senha', false)\n\n      })\n      .catch(() => { \n        this.$toasted.error(\"A nova senha e sua confirmação são diferentes.\", {\n            theme: \"toasted-primary\",\n            position: \"top-right\",\n            duration: 5000\n          })\n       })\n    }).catch((err) => {\n      if (err.message == \"Senha inválida\"){\n      this.$toasted.error(\"A senha atual informada não concide com sua senha cadastrada, tente novamente.\", {\n          theme: \"toasted-primary\",\n          position: \"top-right\",\n          duration: 5000\n        })\n      }\n    })\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DialogAlterarSenha.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DialogAlterarSenha.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DialogAlterarSenha.vue?vue&type=template&id=5445c766&\"\nimport script from \"./DialogAlterarSenha.vue?vue&type=script&lang=ts&\"\nexport * from \"./DialogAlterarSenha.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}