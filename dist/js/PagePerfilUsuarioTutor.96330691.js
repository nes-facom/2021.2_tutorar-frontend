(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PagePerfilUsuarioTutor"],{"10f0":function(t,e,a){"use strict";a("c6ac")},1627:function(t,e,a){},1735:function(t,e,a){"use strict";a("9977")},"1f4d":function(t,e,a){"use strict";a("9f54")},"2fe6":function(t,e,a){t.exports=a.p+"img/dog.f962e89a.jpg"},"49f6":function(t,e,a){"use strict";a("1627")},8446:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tableContainer"},[a("v-tabs",{staticClass:"tabBar",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",[t._v("Minha agenda")]),a("v-tab",[t._v("Solicitações de tutorias")]),a("v-tab",[t._v("Tutorias realizadas")]),a("v-tab",[t._v("Horários")])],1),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("AgendaTutor")],1),a("v-tab-item",[a("SolicitacoesTutoria")],1),a("v-tab-item",[a("Tutorias")],1),a("v-tab-item",[a("Horarios")],1)],1)],1)},n=[],o=a("d4ec"),i=a("bee2"),s=a("262e"),u=a("2caf"),c=(a("d3b7"),a("3ca3"),a("ddb0"),a("a9e3"),a("9ab4")),d=a("cdd0"),l=a("6fc5"),f=a("1b40"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isCarregandoTutorias?r("section",{attrs:{id:"loading"}},[r("v-progress-linear",{staticClass:"mt-12",attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1):r("section",{attrs:{id:"main"}},[r("v-data-table",{key:t.tutoriasArray.id,attrs:{headers:t.headers,items:t.tutoriasArray,"single-expand":t.singleExpand,expanded:t.expanded,"items-per-page":10,"show-expand":"","fixed-header":"",height:"40em"},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[r("strong",{staticClass:"py-1"},[t._v("Ainda não há nenhum dado para ser exibido nesta página")])]},proxy:!0},{key:"item.fotoProfessor",fn:function(t){var e=t.item;return[r("v-avatar",{attrs:{size:"36px"}},[r("v-img",{attrs:{src:e.fotoProfessor,"lazy-src":a("2fe6")}})],1)]}},{key:"expanded-item",fn:function(e){var a=e.headers,n=e.item;return[r("td",{attrs:{colspan:a.length}},[t.getRequestState(n.estado)?r("div",{staticClass:"buttonsContainer"},[r("ModalRegistrarTutoria",{attrs:{nome:n.nomeProfessor,data:n.date,horario:n.time},on:{inputChange:function(e){return t.handleChange(n.id)}}})],1):r("div",{staticClass:"buttonsContainer"},[r("v-btn",{staticClass:"btnTextWhite",attrs:{color:"#106CE5",disabled:""}},[t._v("Registrar tutoria ")])],1)])]}}],null,!0)})],1)},p=[],g=a("1da1"),v=a("5530"),m=(a("96cf"),a("99af"),a("159b"),a("25f0"),a("a3a5")),b=a("4a4e"),x=function(){return a.e("chunk-7dab1e0f").then(a.bind(null,"ff68"))},y=function(t){Object(s["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.authModule=Object(l["e"])(d["a"],t.$store),t.tutoriaModule=Object(l["e"])(m["a"],t.$store),t.professorModule=Object(l["e"])(b["a"],t.$store),t.userCopy=Object(v["a"])({},t.authModule.user),t.showModalRegitrarTutoria=!1,t.dialog=!1,t.isCarregandoTutorias=!0,t.tutoriasArray=[],t.expanded=[],t.singleExpand=!1,t.headers=[{text:"Avatar",value:"fotoProfessor",sortable:!1,align:"start"},{text:"Nome",value:"nomeProfessor"},{text:"Data",value:"date"},{text:"Horário",value:"time"},{text:"Assunto",value:"assunto"},{text:"",value:"acao"},{text:"",value:"data-table-expand"}],t}return Object(i["a"])(a,[{key:"criarTutoria",value:function(t,e,a,r,n,o,i){var s={id:t,fotoProfessor:e,nomeProfessor:a,date:r,time:n,assunto:o,estado:i};return s}},{key:"registrarTutoria",value:function(){console.log("registrarTutoria"),this.showModalRegitrarTutoria=!0}},{key:"cancelarOperacao",value:function(){this.showModalRegitrarTutoria=!1,this.dialog=!1}},{key:"adicionaZero",value:function(t){return t<=9?"0"+t:t}},{key:"formatarData",value:function(t){if(!t)return"";var e=t.substring(0,10),a=e.substring(8,10),r=e.substring(5,7),n=e.substring(0,4);return e="".concat(a,"/").concat(r,"/").concat(n),e}},{key:"user",get:function(){return this.userCopy=this.authModule.user}},{key:"getTutorias",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],t.next=3,this.tutoriaModule.getAllTutoriasFromTutor(this.userCopy._id).then((function(t){t.forEach((function(t){"pendente"!==t.requestState&&a.professorModule.fetchProfessorById(t.professorId).then((function(r){var n=a.criarTutoria(t._id,r.fotoPerfil,r.nome,a.formatarData(t.tutoringDate.toString()),t.tutoringHour.toString(),t.tutoringTopic,t.requestState);e.push(n)}))}))})).finally((function(){a.tutoriasArray=e,a.isCarregandoTutorias=!1}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getRequestState",value:function(t){return"registrada"!==t}},{key:"handleChange",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null==e){t.next=3;break}return t.next=3,this.tutoriaModule.registraTutoria(e).then((function(){a.$toasted.success("Tutoria registrada",{theme:"toasted-primary",position:"top-right",duration:5e3}),a.$root.$emit("myEvent","new message!")}));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatePageData",value:function(){this.getTutorias()}},{key:"mounted",value:function(){var t=this;this.getTutorias(),this.$root.$on("myEvent",(function(){console.log("chegou no evento"),t.updatePageData()}))}}]),a}(f["d"]);y=Object(c["a"])([Object(f["a"])({name:"Tutorias",components:{ModalRegistrarTutoria:x}})],y);var T=y,k=T,O=(a("1f4d"),a("2877")),j=Object(O["a"])(k,h,p,!1,null,null,null),C=j.exports,P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isCarregandoTutorias?r("section",{attrs:{id:"loading"}},[r("v-progress-linear",{staticClass:"mt-12",attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1):r("section",{attrs:{id:"main"}},[r("v-data-table",{key:t.tutoriasArray.id,attrs:{headers:t.requestsHeaders,items:t.tutoriasArray,"single-expand":t.singleExpand,expanded:t.expanded,"show-expand":"","current-items":"","fixed-header":"",height:"40em"},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"no-data",fn:function(){return[r("strong",{staticClass:"py-1"},[t._v("Ainda não há nenhum dado para ser exibido nesta página")])]},proxy:!0},{key:"item.fotoProfessor",fn:function(t){var e=t.item;return[r("v-avatar",{attrs:{size:"36px"}},[r("v-img",{attrs:{src:e.fotoProfessor,"lazy-src":a("2fe6")}})],1)]}},{key:"expanded-item",fn:function(e){var a=e.headers,n=e.item;return[r("td",{attrs:{colspan:a.length}},[r("div",{staticClass:"expandedCellContainer"},[r("div",{staticClass:"descriptionContainer"},[r("p",{staticClass:"description"},[t._v(" "+t._s(n.mensagemTutoria)+" ")]),r("div",{staticClass:"contactInformationContainer"},[r("p",[t._v(t._s(n.emailProfessor))]),r("p",[t._v(t._s(n.celularProfessor))])])]),r("div",{staticClass:"buttonsContainer"},[r("ModalCancelarTutoria",{attrs:{tutoriaId:n.id},on:{inputChange:function(e){return t.handleChange(n.id)}}}),r("ModalAceitarTutoria",{attrs:{tutoriaId:n.id},on:{inputChange:function(e){return t.acceptChange(n.id)}}})],1)])])]}}],null,!0)})],1)},_=[],M=function(){return a.e("chunk-1458f956").then(a.bind(null,"d64b"))},w=function(){return a.e("chunk-44de1a81").then(a.bind(null,"ecae"))},R=function(t){Object(s["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.dialog=!1,t.tutoriasArray=[],t.isCarregandoTutorias=!0,t.tutoriaModule=Object(l["e"])(m["a"],t.$store),t.professorModule=Object(l["e"])(b["a"],t.$store),t.authModule=Object(l["e"])(d["a"],t.$store),t.userCopy=Object(v["a"])({},t.authModule.user),t}return Object(i["a"])(a,[{key:"criarTutoria",value:function(t,e,a,r,n,o,i,s,u){var c={id:t,date:e,time:a,fotoProfessor:r,nomeProfessor:n,assuntoProfessor:o,mensagemTutoria:i,emailProfessor:s,celularProfessor:u};return c}},{key:"user",get:function(){return this.userCopy=this.authModule.user}},{key:"data",value:function(){return{expanded:[],singleExpand:!1,requestsHeaders:[{text:"Foto",align:"start",sortable:!1,value:"fotoProfessor"},{text:"Nome",value:"nomeProfessor"},{text:"Data",value:"date"},{text:"Horário",value:"time"},{text:"Assunto",value:"assuntoProfessor"},{text:"",value:"data-table-expand"}]}}},{key:"getTutoria",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],t.next=3,this.tutoriaModule.getTutoriasPendentesFromTutor(this.userCopy._id).then((function(t){t.forEach((function(t){a.professorModule.fetchProfessorById(t.professorId).then((function(r){var n=a.criarTutoria(t._id,a.formatarData(t.tutoringDate.toString()),t.tutoringHour.toString(),r.fotoPerfil,r.nome,t.tutoringTopic,t.requestMessage,r.email,r.celular);e.push(n)}))}))})).finally((function(){a.tutoriasArray=e,a.isCarregandoTutorias=!1}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleChange",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null==e){t.next=3;break}return t.next=3,this.tutoriaModule.deleteTutoria(e).then((function(){a.$toasted.success("Tutoria deletada",{theme:"toasted-primary",position:"top-right",duration:5e3})}));case 3:this.getTutoria();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"acceptChange",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null==e){t.next=4;break}return t.next=3,this.tutoriaModule.aceitaTutoria(e).then((function(){a.$toasted.success("Tutoria aceita",{theme:"toasted-primary",position:"top-right",duration:5e3})}));case 3:this.$root.$emit("myEvent","new message!");case 4:this.getTutoria();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"formatarData",value:function(t){if(!t)return"";var e=t.substring(0,10),a=e.substring(8,10),r=e.substring(5,7),n=e.substring(0,4);return e="".concat(a,"/").concat(r,"/").concat(n),e}},{key:"mounted",value:function(){this.getTutoria()}}]),a}(f["d"]);R=Object(c["a"])([Object(f["a"])({name:"Tutorias",components:{ModalCancelarTutoria:M,ModalAceitarTutoria:w}})],R);var D=R,S=D,q=(a("49f6"),Object(O["a"])(S,P,_,!1,null,null,null)),A=q.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[t._v("Dias")]),a("v-chip-group",{attrs:{mandatory:"",column:"","active-class":"primary--text"},model:{value:t.preselectday,callback:function(e){t.preselectday=e},expression:"preselectday"}},t._l(t.diasSemana,(function(e,r){return a("v-chip",{key:r,staticClass:"main__chips-diasSemanas",attrs:{outlined:""},on:{click:function(a){return t.carregaHorariosDoDia(e.value)}}},[t._v(" "+t._s(e.nome)+" ")])})),1),a("p",[t._v("Horários")]),a("v-chip-group",{attrs:{multiple:"",column:"","active-class":"primary--text"},model:{value:t.intersec,callback:function(e){t.intersec=e},expression:"intersec"}},t._l(t.horas,(function(e,r){return a("v-chip",{key:r,staticClass:"ma-2",attrs:{active:"",outlined:"",filter:""},on:{click:function(a){t.isSelected(r)?t.removeHorario(e.text):t.addHorario(e.text)}}},[t._v(" "+t._s(e.text)+" ")])})),1),a("div",{staticClass:"btnSalvar"},[a("v-btn",{staticClass:"ma-2 btnTextWhite",attrs:{color:"#106CE5"},on:{click:function(e){return t.salvaConfiguracao()}}},[t._v(" Salvar ")])],1)],1)},H=[],E=(a("d81d"),a("4de4"),a("b64b"),a("498a"),a("ac1f"),a("1276"),a("ed54")),F=a("e82c"),I=a("eb83"),B=a("2ef0"),z=a("d257"),U=function(){return{segunda:[],terca:[],quarta:[],quinta:[],sexta:[]}},N=function(t){Object(s["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.authModule=Object(l["e"])(d["a"],t.$store),t.diasSemana=[{nome:"Segunda",value:"segunda"},{nome:"Terça",value:"terca"},{nome:"Quarta",value:"quarta"},{nome:"Quinta",value:"quinta"},{nome:"Sexta",value:"sexta"}],t.horas=[{text:"07:00 - 08:00"},{text:"08:00 - 09:00"},{text:"09:00 - 10:00"},{text:"10:00 - 11:00"},{text:"11:00 - 12:00"},{text:"12:00 - 13:00"},{text:"13:00 - 14:00"},{text:"14:00 - 15:00"},{text:"15:00 - 16:00"},{text:"16:00 - 17:00"},{text:"17:00 - 18:00"},{text:"18:00 - 19:00"},{text:"19:00 - 20:00"},{text:"20:00 - 21:00"},{text:"21:00 - 22:00"},{text:"22:00 - 23:00"}],t.horasTutor=[{id:1,text:"07:00 - 09:00"},{id:2,text:"08:00 - 09:00"},{text:"10:00 - 11:00"},{text:"16:00 - 17:00"},{text:"17:00 - 18:00"},{text:"18:00 - 19:00"},{text:"19:00 - 20:00"},{text:"22:00 - 23:00"}],t.agendaFormatadaParaRequest=U(),t.diaSelecionado="segunda",t.preselectday=0,t.intersec=[],t.agendaTutorDia=[],t}return Object(i["a"])(a,[{key:"encontraInterseccao",value:function(){var t=this,e=this.horas.map((function(e,a){if(t.agendaTutorDia.some((function(t){return e.text===t.text})))return a})),a=e.filter((function(t){return void 0!==t}));console.log("resultadoFiltrado",a),this.intersec=a}},{key:"getAgenda",value:function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.authModule.user,Object(E["c"])(e)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(I["a"])(e._id).then((function(t){console.log("Agenda obtida do banco",t),a.agendaTutorBD=t,a.agendaFormatadaParaRequest=Object(B["cloneDeep"])(a.agendaTutorBD),Object.keys(a.agendaFormatadaParaRequest).map((function(t){var e=t;a.agendaFormatadaParaRequest[e].forEach((function(t){return Object(z["c"])(t)}))})),console.log("copiaHorariosTeste",a.agendaFormatadaParaRequest)}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"addHorario",value:function(t){var e=t.split("-")[0].trim(),a=t.split("-")[1].trim();this.diaSelecionado&&this.agendaFormatadaParaRequest[this.diaSelecionado].push({inicio:e,fim:a}),console.log("apos adicionar",this.agendaFormatadaParaRequest)}},{key:"removeHorario",value:function(t){var e=t.split("-")[0].trim(),a=t.split("-")[1].trim();this.diaSelecionado&&(this.agendaFormatadaParaRequest[this.diaSelecionado]=this.agendaFormatadaParaRequest[this.diaSelecionado].filter((function(t){if(t.inicio!==e&&t.fim!==a)return!0}))),console.log("apos remover",this.agendaFormatadaParaRequest)}},{key:"isSelected",value:function(t){return this.intersec.indexOf(t),-1!==this.intersec.indexOf(t)}},{key:"carregaHorariosDoDia",value:function(t){console.log("agendaBD por semana",this.agendaTutorBD[t]),this.agendaTutorDia=this.agendaTutorBD[t].map((function(t){return{text:"".concat(t.inicio," - ").concat(t.fim)}})),console.log("agenda do tutor no dia",this.agendaTutorDia),this.encontraInterseccao(),this.diaSelecionado=t}},{key:"salvaConfiguracao",value:function(){var t=this,e=this.authModule.user;if(Object(E["c"])(e)){var a={segunda:[{inicio:"1300",fim:"1400"}],terca:[{inicio:"1300",fim:"1400"}],quarta:[{inicio:"1300",fim:"1400"}],quinta:[{inicio:"1300",fim:"1400"}],sexta:[{inicio:"1300",fim:"1400"}]};console.log("agenda formatada",a),Object(F["a"])(e._id,this.agendaFormatadaParaRequest).then((function(e){t.$emit("horarios-atualizados",e);var a=t.authModule.user;if(Object(E["c"])(a)){var r=Object(B["cloneDeep"])(a);r.agenda=e,t.authModule.AUTH_UPDATE({user:r}),t.$emit("input",!1)}}))}}},{key:"mounted",value:function(){var t=this;this.getAgenda().then((function(){return t.carregaHorariosDoDia("segunda")}))}}]),a}(f["d"]);N=Object(c["a"])([Object(f["a"])({name:"horarios"})],N);var J=N,Q=J,W=(a("10f0"),Object(O["a"])(Q,$,H,!1,null,"043637b6",null)),Z=W.exports,G=function(){return a.e("PageAgenda").then(a.bind(null,"c6f1"))},K=function(t){Object(s["a"])(a,t);var e=Object(u["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.authModule=Object(l["e"])(d["a"],t.$store),t.tab=0,t.isEditing=!1,t}return Object(i["a"])(a,[{key:"canEditUser",get:function(){return 2===Number(this.tab)}}]),a}(f["d"]);K=Object(c["a"])([Object(f["a"])({name:"PageHomeTutor",components:{Tutorias:C,SolicitacoesTutoria:A,AgendaTutor:G,Horarios:Z}})],K);var L=K,V=L,X=(a("1735"),Object(O["a"])(V,r,n,!1,null,"9eb1e0a0",null));e["default"]=X.exports},9977:function(t,e,a){},"9f54":function(t,e,a){},c6ac:function(t,e,a){}}]);
//# sourceMappingURL=PagePerfilUsuarioTutor.96330691.js.map